---
title: Using Dialogflow for chatbot development
videoId: CKhV7-NF2OI
---

From: [[fireship]] <br/> 

[[Using Dialogflow for chatbot development]] involves leveraging Dialogflow, formerly known as API.AI, a powerful engine developed by Google for creating conversational experiences <a class="yt-timestamp" data-t="00:00:08">[00:00:08]</a> <a class="yt-timestamp" data-t="00:00:13">[00:00:13]</a>. It integrates Google's machine learning and [[understanding_natural_language_processing_with_chatbots | natural language processing]] (NLP) technology, providing a user-friendly interface for developers to [[building_a_chatbot_using_dialogflow | build chatbots]] and deploy them across various platforms like the web, Slack, or Facebook Messenger <a class="yt-timestamp" data-t="00:00:15">[00:00:15]</a> <a class="yt-timestamp" data-t="00:00:19">[00:00:19]</a> <a class="yt-timestamp" data-t="00:00:23">[00:00:23]</a>. Dialogflow is a free service, not requiring billing information for setup <a class="yt-timestamp" data-t="00:02:27">[00:02:27]</a>.

## Key Concepts in Dialogflow

### Agents
An **agent** is the core component of your chatbot in Dialogflow <a class="yt-timestamp" data-t="00:02:31">[00:02:31]</a>. Its primary purpose is to return information based on user queries, such as providing general details about a framework like Angular <a class="yt-timestamp" data-t="00:02:38">[00:02:38]</a> <a class="yt-timestamp" data-t="00:02:41">[00:02:41]</a>.

### Intents
The fundamental function of an agent is to detect user **intent** <a class="yt-timestamp" data-t="00:02:47">[00:02:47]</a>.
When an intent is recognized, the chatbot can:
*   Execute backend code <a class="yt-timestamp" data-t="00:03:01">[00:03:01]</a>.
*   Send a direct response to the user <a class="yt-timestamp" data-t="00:03:03">[00:03:03]</a>.

To make the bot robust, you add multiple phrases that a user might say to express a particular intent <a class="yt-timestamp" data-t="00:03:25">[00:03:25]</a> <a class="yt-timestamp" data-t="00:03:26">[00:03:26]</a>. Once the intent is recognized, the bot sends a pre-defined response <a class="yt-timestamp" data-t="00:03:33">[00:03:33]</a>. If an intent is not recognized, Dialogflow allows for [[customizing_chatbot_responses_with_dialogflow | customized messages]] to be sent <a class="yt-timestamp" data-t="00:03:09">[00:03:09]</a>.

### Small Talk
**Small Talk** is a feature in Dialogflow that enables rapid [[customizing_chatbot_responses_with_dialogflow | customization]] of a bot's personality without requiring the creation of custom intents <a class="yt-timestamp" data-t="00:03:57">[00:03:57]</a> <a class="yt-timestamp" data-t="00:03:59">[00:03:59]</a>. It comes with an extensive list of possible scenarios, to which developers can add custom language for common questions, enhancing the user experience with funny or intelligent responses <a class="yt-timestamp" data-t="00:04:07">[00:04:07]</a> <a class="yt-timestamp" data-t="00:04:09">[00:04:09]</a> <a class="yt-timestamp" data-t="00:04:18">[00:04:18]</a>.

## [[Building a chatbot with Angular | Building a Chatbot with Angular]] and Dialogflow

The process of [[building_a_chatbot_with_angular | building a chatbot]] using [[integrating_dialogflow_with_an_angular_application | Angular and Dialogflow]] can be completed quickly <a class="yt-timestamp" data-t="00:00:00">[00:00:00]</a> <a class="yt-timestamp" data-t="00:00:04">[00:00:04]</a>. The JavaScript SDK allows for building chatbots directly within Angular <a class="yt-timestamp" data-t="00:00:29">[00:00:29]</a> <a class="yt-timestamp" data-t="00:00:31">[00:00:31]</a>.

### Setup and Integration Steps

1.  **Create an Angular App**: Begin by generating a new Angular application using the Angular CLI command `ng new chatbot` <a class="yt-timestamp" data-t="00:00:43">[00:00:43]</a> <a class="yt-timestamp" data-t="00:00:44">[00:00:44]</a>.
2.  **Install Dialogflow SDK**: Install the JavaScript SDK (API.AI via NPM) in the development environment <a class="yt-timestamp" data-t="00:00:49">[00:00:49]</a> <a class="yt-timestamp" data-t="00:00:52">[00:00:52]</a>.
3.  **Configure Angular CLI**: Modify the `angular.json` file to remove the default `app` prefix for components <a class="yt-timestamp" data-t="00:00:59">[00:00:59]</a> <a class="yt-timestamp" data-t="00:01:00">[00:01:00]</a> <a class="yt-timestamp" data-t="00:01:05">[00:01:05]</a>.
4.  **Create a Feature Module**: Generate a feature module (e.g., `chat`) to encapsulate chatbot-related code <a class="yt-timestamp" data-t="00:01:14">[00:01:14]</a> <a class="yt-timestamp" data-t="00:01:16">[00:01:16]</a> <a class="yt-timestamp" data-t="00:01:22">[00:01:22]</a> <a class="yt-timestamp" data-t="00:01:24">[00:01:24]</a>.
    *   Add a service (e.g., `chat` service) to this module using the `-m` flag <a class="yt-timestamp" data-t="00:01:27">[00:01:27]</a> <a class="yt-timestamp" data-t="00:01:29">[00:01:29]</a> <a class="yt-timestamp" data-t="00:01:31">[00:01:31]</a>.
    *   Create a component (e.g., `chat-dialog` component) within the same module <a class="yt-timestamp" data-t="00:01:33">[00:01:33]</a> <a class="yt-timestamp" data-t="00:01:35">[00:01:35]</a>.
    *   Include the `AngularFormsModule` in the module <a class="yt-timestamp" data-t="00:01:47">[00:01:47]</a> <a class="yt-timestamp" data-t="00:01:49">[00:01:49]</a>.
    *   Export the `chat-dialog` component to be used in the `app` component <a class="yt-timestamp" data-t="00:01:51">[00:01:51]</a> <a class="yt-timestamp" data-t="00:01:53">[00:01:53]</a>.
5.  **Import Chat Module**: Import the newly created `chat` module into the main `app` module <a class="yt-timestamp" data-t="00:02:02">[00:02:02]</a> <a class="yt-timestamp" data-t="00:02:04">[00:02:04]</a> <a class="yt-timestamp" data-t="00:02:06">[00:02:06]</a>.
6.  **Use Component**: Declare the `chat-dialog` component in the `app` component's template <a class="yt-timestamp" data-t="00:02:12">[00:02:12]</a> <a class="yt-timestamp" data-t="00:02:13">[00:02:13]</a> <a class="yt-timestamp" data-t="00:02:16">[00:02:16]</a>.
7.  **Create a Dialogflow Agent**: Sign up for Dialogflow, then create your first agent (e.g., `angular-bot`) <a class="yt-timestamp" data-t="00:02:26">[00:02:26]</a> <a class="yt-timestamp" data-t="00:02:27">[00:02:27]</a> <a class="yt-timestamp" data-t="00:02:31">[00:02:31]</a> <a class="yt-timestamp" data-t="00:02:35">[00:02:35]</a>.
8.  **Get Client Access Token**: Obtain the client access token from the Dialogflow agent settings <a class="yt-timestamp" data-t="00:04:27">[00:04:27]</a> <a class="yt-timestamp" data-t="00:04:29">[00:04:29]</a> <a class="yt-timestamp" data-t="00:04:31">[00:04:31]</a> <a class="yt-timestamp" data-t="00:04:33">[00:04:33]</a>.
9.  **Store Token in Angular**: Add the client access token to your Angular `environment.ts` file <a class="yt-timestamp" data-t="00:04:37">[00:04:37]</a> <a class="yt-timestamp" data-t="00:04:39">[00:04:39]</a> <a class="yt-timestamp" data-t="00:04:41">[00:04:41]</a>.
10. **Communicate with Bot via Service**:
    *   Import the environment and `API.AI client` into the chat service <a class="yt-timestamp" data-t="00:04:55">[00:04:55]</a> <a class="yt-timestamp" data-t="00:04:56">[00:04:56]</a> <a class="yt-timestamp" data-t="00:04:58">[00:04:58]</a> <a class="yt-timestamp" data-t="00:05:00">[00:05:00]</a> <a class="yt-timestamp" data-t="00:05:02">[00:05:02]</a>.
    *   Initialize the `API.AI client` using the client access token <a class="yt-timestamp" data-t="00:05:09">[00:05:09]</a> <a class="yt-timestamp" data-t="00:05:11">[00:05:11]</a> <a class="yt-timestamp" data-t="00:05:13">[00:05:13]</a> <a class="yt-timestamp" data-t="00:05:15">[00:05:15]</a>.
    *   Create a method (e.g., `talk`) that uses `client.textRequest()` to send user text to Dialogflow, which returns a JSON response containing the agent's reply (`fulfillmentSpeech`) <a class="yt-timestamp" data-t="00:05:24">[00:05:24]</a> <a class="yt-timestamp" data-t="00:05:26">[00:05:26]</a> <a class="yt-timestamp" data-t="00:05:28">[00:05:28]</a> <a class="yt-timestamp" data-t="00:05:30">[00:05:30]</a> <a class="yt-timestamp" data-t="00:05:32">[00:05:32]</a> <a class="yt-timestamp" data-t="00:05:34">[00:05:34]</a> <a class="yt-timestamp" data-t="00:05:37">[00:05:37]</a> <a class="yt-timestamp" data-t="00:05:42">[00:05:42]</a>.
11. **Manage Conversation State**:
    *   Use RxJS `Observable` and `BehaviorSubject` to create an observable array of messages <a class="yt-timestamp" data-t="00:06:17">[00:06:17]</a> <a class="yt-timestamp" data-t="00:06:18">[00:06:18]</a> <a class="yt-timestamp" data-t="00:06:20">[00:06:20]</a> <a class="yt-timestamp" data-t="00:06:22">[00:06:22]</a>.
    *   Define a `Message` class with `content` (string) and `sentBy` (to distinguish bot/human) properties <a class="yt-timestamp" data-t="00:06:25">[00:06:25]</a> <a class="yt-timestamp" data-t="00:06:27">[00:06:27]</a> <a class="yt-timestamp" data-t="00:06:29">[00:06:29]</a> <a class="yt-timestamp" data-t="00:06:31">[00:06:31]</a> <a class="yt-timestamp" data-t="00:06:33">[00:06:33]</a>.
    *   Maintain a `conversation` variable as a `BehaviorSubject` of `Message` arrays <a class="yt-timestamp" data-t="00:06:38">[00:06:38]</a> <a class="yt-timestamp" data-t="00:06:39">[00:06:39]</a> <a class="yt-timestamp" data-t="00:06:41">[00:06:41]</a> <a class="yt-timestamp" data-t="00:06:43">[00:06:43]</a>.
    *   Implement an `update` function to add new messages to the `conversation` using `behaviorSubject.next()` <a class="yt-timestamp" data-t="00:06:49">[00:06:49]</a> <a class="yt-timestamp" data-t="00:06:51">[00:06:51]</a> <a class="yt-timestamp" data-t="00:06:53">[00:06:53]</a> <a class="yt-timestamp" data-t="00:06:59">[00:06:59]</a>.
    *   Format user and bot responses into `Message` objects and update the `conversation` <a class="yt-timestamp" data-t="00:07:05">[00:07:05]</a> <a class="yt-timestamp" data-t="00:07:07">[00:07:07]</a> <a class="yt-timestamp" data-t="00:07:09">[00:07:09]</a> <a class="yt-timestamp" data-t="00:07:11">[00:07:11]</a> <a class="yt-timestamp" data-t="00:07:13">[00:07:13]</a> <a class="yt-timestamp" data-t="00:07:16">[00:07:16]</a> <a class="yt-timestamp" data-t="00:07:18">[00:07:18]</a> <a class="yt-timestamp" data-t="00:07:21">[00:07:21]</a> <a class="yt-timestamp" data-t="00:07:24">[00:07:24]</a> <a class="yt-timestamp" data-t="00:07:26">[00:07:26]</a> <a class="yt-timestamp" data-t="00:07:28">[00:07:28]</a> <a class="yt-timestamp" data-t="00:07:30">[00:07:30]</a> <a class="yt-timestamp" data-t="00:07:32">[00:07:32]</a> <a class="yt-timestamp" data-t="00:07:34">[00:07:34]</a> <a class="yt-timestamp" data-t="00:07:36">[00:07:36]</a> <a class="yt-timestamp" data-t="00:07:39">[00:07:39]</a> <a class="yt-timestamp" data-t="00:07:41">[00:07:41]</a> <a class="yt-timestamp" data-t="00:07:43">[00:07:43]</a> <a class="yt-timestamp" data-t="00:07:45">[00:07:45]</a> <a class="yt-timestamp" data-t="00:07:46">[00:07:46]</a> <a class="yt-timestamp" data-t="00:07:49">[00:07:49]</a>.
12. **Display Messages in Component**:
    *   In the `chat-dialog` component, import the `ChatService` and `Message` class <a class="yt-timestamp" data-t="00:07:53">[00:07:53]</a> <a class="yt-timestamp" data-t="00:07:54">[00:07:54]</a> <a class="yt-timestamp" data-t="00:07:57">[00:07:57]</a> <a class="yt-timestamp" data-t="00:07:59">[00:07:59]</a> <a class="yt-timestamp" data-t="00:08:01">[00:08:01]</a>.
    *   Convert the `BehaviorSubject` from the service into an `Observable` array of messages using the `scan` operator <a class="yt-timestamp" data-t="00:08:29">[00:08:29]</a> <a class="yt-timestamp" data-t="00:08:31">[00:08:31]</a> <a class="yt-timestamp" data-t="00:08:33">[00:08:33]</a> <a class="yt-timestamp" data-t="00:08:34">[00:08:34]</a> <a class="yt-timestamp" data-t="00:08:37">[00:08:37]</a> <a class="yt-timestamp" data-t="00:08:40">[00:08:40]</a> <a class="yt-timestamp" data-t="00:08:43">[00:08:43]</a> <a class="yt-timestamp" data-t="00:08:45">[00:08:45]</a>.
    *   Loop over the observable list of messages in the HTML using `ngFor` with the `async` pipe <a class="yt-timestamp" data-t="00:09:02">[00:09:02]</a> <a class="yt-timestamp" data-t="00:09:03">[00:09:03]</a> <a class="yt-timestamp" data-t="00:09:06">[00:09:06]</a> <a class="yt-timestamp" data-t="00:09:26">[00:09:26]</a> <a class="yt-timestamp" data-t="00:09:28">[00:09:28]</a> <a class="yt-timestamp" data-t="00:09:30">[00:09:30]</a>.
    *   Use `ngClass` to differentiate between bot and human messages <a class="yt-timestamp" data-t="00:09:35">[00:09:35]</a> <a class="yt-timestamp" data-t="00:09:38">[00:09:38]</a> <a class="yt-timestamp" data-t="00:09:39">[00:09:39]</a>.
    *   Set up a form with an input using `ngModel` for the user to type messages, and bind an event handler to send the message to Dialogflow on enter or button click <a class="yt-timestamp" data-t="00:09:55">[00:09:55]</a> <a class="yt-timestamp" data-t="00:09:57">[00:09:57]</a> <a class="yt-timestamp" data-t="00:09:59">[00:09:59]</a> <a class="yt-timestamp" data-t="00:10:01">[00:10:01]</a> <a class="yt-timestamp" data-t="00:10:04">[00:10:04]</a> <a class="yt-timestamp" data-t="00:10:06">[00:10:06]</a> <a class="yt-timestamp" data-t="00:10:08">[00:10:08]</a> <a class="yt-timestamp" data-t="00:10:10">[00:10:10]</a> <a class="yt-timestamp" data-t="00:10:13">[00:10:13]</a> <a class="yt-timestamp" data-t="00:10:15">[00:10:15]</a>.

### Testing and Customization
After setup, you can test the chatbot within Dialogflow itself <a class="yt-timestamp" data-t="00:03:42">[00:03:42]</a> <a class="yt-timestamp" data-t="00:03:43">[00:03:43]</a> <a class="yt-timestamp" data-t="00:03:45">[00:03:45]</a>. Once integrated with Angular, the bot will respond based on trained intents (e.g., "what is a component" responds with "it's just JavaScript") and small talk configurations (e.g., "who are you" responds with the agent's custom introduction) <a class="yt-timestamp" data-t="00:03:56">[00:03:56]</a> <a class="yt-timestamp" data-t="00:04:12">[00:04:12]</a> <a class="yt-timestamp" data-t="00:04:13">[00:04:13]</a> <a class="yt-timestamp" data-t="00:10:31">[00:10:31]</a> <a class="yt-timestamp" data-t="00:10:33">[00:10:33]</a> <a class="yt-timestamp" data-t="00:10:49">[00:10:49]</a> <a class="yt-timestamp" data-t="00:10:51">[00:10:51]</a> <a class="yt-timestamp" data-t="00:10:53">[00:10:53]</a> <a class="yt-timestamp" data-t="00:10:55">[00:10:55]</a> <a class="yt-timestamp" data-t="00:10:59">[00:10:59]</a>.