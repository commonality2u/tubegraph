---
title: Nvidia CuLitho software library
videoId: HxyM2Chu9Vc
---

From: [[asianometry]] <br/> 

In March 2023, [[Nvidia and competition in the AI chip market | Nvidia]] announced a new software library called "CuLitho" <a class="yt-timestamp" data-t="00:00:02">[00:00:02]</a>. This [[computational_lithography_advancements | computational lithography]] library is claimed by [[Nvidia and competition in the AI chip market | Nvidia]] to "deliver a performance leap of up to 40x beyond current lithography" <a class="yt-timestamp" data-t="00:00:08">[00:00:08]</a>. The announcement garnered positive feedback from both ASML and TSMC <a class="yt-timestamp" data-t="00:00:32">[00:00:32]</a>.

## Introducing CuLitho

CuLitho was introduced during an [[Nvidia and competition in the AI chip market | Nvidia]] session titled "Accelerating [[computational_lithography_advancements | Computational Lithography]]: Enabling our Electronic Future" by Dr. Vivek K. Singh <a class="yt-timestamp" data-t="00:00:55">[00:00:55]</a>. Dr. Singh described CuLitho as:
> CuLitho is a collection of parallel algorithms invented by [[Nvidia and competition in the AI chip market | Nvidia]] scientists for accelerated primitive operations of OPC <a class="yt-timestamp" data-t="00:01:17">[00:01:17]</a>

The library utilizes GPUs to accelerate algorithms, sometimes by hundreds of times <a class="yt-timestamp" data-t="00:01:26">[00:01:26]</a>. These GPU-optimized algorithms are integrated into traditional OPC (Optical Proximity Correction) EDA software <a class="yt-timestamp" data-t="00:01:35">[00:01:35]</a>. The use of parallelism allows GPUs to process these algorithms significantly faster than CPUs <a class="yt-timestamp" data-t="00:01:39">[00:01:39]</a>, leading to an overall faster end-to-end [[computational_lithography_advancements | computational lithography]] system, achieving the headline speed increase of 23 to 42 times <a class="yt-timestamp" data-t="00:01:46">[00:01:46]</a>. Essentially, CuLitho is GPU-optimized software designed to speed up [[computational_lithography_advancements | computational lithography]] processes <a class="yt-timestamp" data-t="00:01:58">[00:01:58]</a>.

## Why is it important to run these processes faster?

### Lithography Fundamentals
Lithography is the process of transferring a chip design from a photomask onto a resist-coated wafer <a class="yt-timestamp" data-t="00:02:15">[00:02:15]</a>. Optical lithography, which involves projecting light waves through or off a mask, has been used since its inception <a class="yt-timestamp" data-t="00:02:21">[00:02:21]</a>.

A significant challenge arose in the late 1990s when printed feature sizes became smaller than the light wavelengths used to print them, starting with the 180 nanometer node that used the 248 nanometer KrF DUV laser <a class="yt-timestamp" data-t="00:02:34">[00:02:34]</a>. This situation can lead to incorrect pattern transfers due to resolution and image quality deterioration <a class="yt-timestamp" data-t="00:02:56">[00:02:56]</a>.

### Improving K1
To achieve the necessary resolutions with larger wavelengths, engineers refer to Rayleigh's equation:
> Resolution = K1 * wavelength / Numerical Aperture (NA) <a class="yt-timestamp" data-t="00:03:20">[00:03:20]</a>

Options include raising NA or lowering K1 <a class="yt-timestamp" data-t="00:03:26">[00:03:26]</a>.
*   **Raising NA** (Numerical Aperture) means collecting more light, seen in technologies like immersion lithography and [[extreme_ultraviolet_lithography_and_its_challenges | High-NA EUV]] <a class="yt-timestamp" data-t="00:03:32">[00:03:32]</a>. However, it reduces the depth of focus, which is the vertical distance where image quality remains acceptable <a class="yt-timestamp" data-t="00:03:40">[00:03:40]</a>. A thinner depth of focus requires a thinner resist layer, potentially compromising subsequent etch processes <a class="yt-timestamp" data-t="00:03:55">[00:03:55]</a>.
*   **Lowering K1** is the other critical approach <a class="yt-timestamp" data-t="00:04:23">[00:04:23]</a>. K1 represents contributions from the manufacturing process, including the resist, materials, and imaging techniques <a class="yt-timestamp" data-t="00:04:26">[00:04:26]</a>. This is where [[computational_lithography_advancements | computational lithography]] plays a vital role, significantly helping to lower K1 over the years <a class="yt-timestamp" data-t="00:04:34">[00:04:34]</a>.

## [[computational_lithography_advancements | Computational Lithography]]

[[computational_lithography_advancements | Computational lithography]] began in the early 1970s with efforts to quantify the natural principles behind lithography, which was previously considered an artisan technique <a class="yt-timestamp" data-t="00:04:49">[00:04:49]</a>. Pioneers like IBM's Dr. Rick Dill developed computer models to simulate how resist-coated wafers react to light <a class="yt-timestamp" data-t="00:05:03">[00:05:03]</a>. By the early 1990s, with improved computing power, [[computational_lithography_advancements | computational lithography]] became practical for real-world use <a class="yt-timestamp" data-t="00:05:26">[00:05:26]</a>. This allowed leveraging knowledge to improve chip design printability through techniques broadly known as "Resolution Enhancement Techniques" (RETs) <a class="yt-timestamp" data-t="00:05:38">[00:05:38]</a>.

### RETs & OPCs
RETs are optical tricks to improve design transfer <a class="yt-timestamp" data-t="00:05:50">[00:05:50]</a>. Key RETs introduced over 25 years ago to bridge the wavelength-feature size gap at the 180 nanometer node included Phase Shifting Masks, Off-axis Illumination, and Optical Proximity Correction (OPC) <a class="yt-timestamp" data-t="00:06:03">[00:06:03]</a>.

**Optical Proximity Corrections (OPCs)** involve modifying the chip design layout to compensate for optical distortions <a class="yt-timestamp" data-t="00:06:29">[00:06:29]</a>. This means intentionally "mis-printing" the design onto the photomask so that it prints correctly on the wafer <a class="yt-timestamp" data-t="00:06:36">[00:06:36]</a>.

*   **Rules-based OPC** (mid-1990s): These were based on simple geometric rules, like adding tickmarks (serifs) to design lines to make them easier to print <a class="yt-timestamp" data-t="00:06:47">[00:06:47]</a>. Due to their simplicity, they were mainly used for higher layers in the IC, such as the metal interconnect layer <a class="yt-timestamp" data-t="00:07:12">[00:07:12]</a>.
*   **Model-based OPC**: As feature sizes shrank, simple rules were insufficient <a class="yt-timestamp" data-t="00:07:25">[00:07:25]</a>. Model-based OPC uses extensive [[computational_lithography_advancements | computational lithography]] simulations to correct the entire layout before it goes to the fab <a class="yt-timestamp" data-t="00:07:33">[00:07:33]</a>. The design file (GDSII) is processed through OPC software <a class="yt-timestamp" data-t="00:07:40">[00:07:40]</a>. Since simulating the entire chip at once is impossible, the design is broken into segments, and samples are taken <a class="yt-timestamp" data-t="00:07:51">[00:07:51]</a>. The program iteratively corrects the mask design based on simulations of light travel and resist interaction <a class="yt-timestamp" data-t="00:08:01">[00:08:01]</a>. While accurate, this reliance on intense computation and iteration makes it very slow, impacting development cycles as chip designs grow more complex <a class="yt-timestamp" data-t="00:08:16">[00:08:16]</a>.

### [[inverse_lithography_technology_ilt | Inverse Lithography Technology (ILT)]]
In 1981, Professor B.E.A. Saleh proposed the concepts for what would become [[inverse_lithography_technology_ilt | Inverse Lithography Technology (ILT)]] <a class="yt-timestamp" data-t="00:08:41">[00:08:41]</a>. Like OPC, [[inverse_lithography_technology_ilt | ILT]] is a Resolution Enhancement Technique aimed at improving the resolution of the chip design image transfer <a class="yt-timestamp" data-t="00:08:52">[00:08:52]</a>, but it takes a different approach <a class="yt-timestamp" data-t="00:09:00">[00:09:00]</a>.

*   **Conceptual Difference**: Traditional OPC goes from mask to wafer (design first, then simulated changes) <a class="yt-timestamp" data-t="00:09:03">[00:09:03]</a>. [[inverse_lithography_technology_ilt | ILT]] goes the other way, conceptually, from wafer to mask <a class="yt-timestamp" data-t="00:09:15">[00:09:15]</a>. It starts with the desired pattern on the wafer and works backward to determine the optimal mask design <a class="yt-timestamp" data-t="00:09:20">[00:09:20]</a>, creating the mask pixel by pixel from scratch <a class="yt-timestamp" data-t="00:09:33">[00:09:33]</a>.

*   **Development**: Saleh initially used a variant of "simulated annealing," an optimization technique involving random changes to pixels, keeping what works <a class="yt-timestamp" data-t="00:09:49">[00:09:49]</a>. Researchers at Berkeley and IBM refined the technique <a class="yt-timestamp" data-t="00:10:14">[00:10:14]</a>. In 2003, Luminescent Technologies popularized [[inverse_lithography_technology_ilt | ILT]] with their paper "Fast [[inverse_lithography_technology_ilt | Inverse Lithography Technology]]" <a class="yt-timestamp" data-t="00:10:22">[00:10:22]</a>. Intel also developed its own version, calling it "pixelated mask technology" <a class="yt-timestamp" data-t="00:10:36">[00:10:36]</a>. [[inverse_lithography_technology_ilt | ILT]] results in highly unintuitive, often mutated mask designs, yet they yield superior printability <a class="yt-timestamp" data-t="00:10:53">[00:10:53]</a>.

### Bottlenecks of [[inverse_lithography_technology_ilt | ILT]]
Despite its superior accuracy and fidelity to the desired pattern, [[inverse_lithography_technology_ilt | ILT]] faced substantial trade-offs <a class="yt-timestamp" data-t="00:11:11">[00:11:11]</a>:

1.  **Computational Power and Throughput**: Accounting for every pixel provides an optimal solution but requires immense computing power or time <a class="yt-timestamp" data-t="00:11:29">[00:11:29]</a>. Some designs could take weeks to process, which was unacceptable <a class="yt-timestamp" data-t="00:11:41">[00:11:41]</a>.
2.  **Mask Manufacturing**: Photomasks are written using focused electron beams <a class="yt-timestamp" data-t="00:11:48">[00:11:48]</a>. While most masks use "Manhattan geometry" (rectangles), [[inverse_lithography_technology_ilt | ILT]]-generated masks tend to be "curvilinear," featuring complex curves and diagonals <a class="yt-timestamp" data-t="00:12:00">[00:12:00]</a>. Producing these curvilinear masks traditionally required "fracturing" complex shapes into rectangles, which was challenging <a class="yt-timestamp" data-t="00:12:12">[00:12:12]</a>.

These issues, along with competition, proved game-breaking for Luminescent and [[inverse_lithography_technology_ilt | ILT]] in the late 2000s and early 2010s <a class="yt-timestamp" data-t="00:12:22">[00:12:22]</a>. [[inverse_lithography_technology_ilt | ILT]] was deemed "too early for its time" <a class="yt-timestamp" data-t="00:12:30">[00:12:30]</a>. The introduction of 193 nanometer immersion lithography improved resolutions to such an extent that manufacturers didn't widely adopt [[inverse_lithography_technology_ilt | ILT]] over OPC <a class="yt-timestamp" data-t="00:12:45">[00:12:45]</a>. Although some EDA vendors incorporated [[inverse_lithography_technology_ilt | ILT]], its use was mostly reserved for special situations <a class="yt-timestamp" data-t="00:12:57">[00:12:57]</a>. In 2012, Luminescent was split, with parts acquired by KLA and Synopsys <a class="yt-timestamp" data-t="00:13:05">[00:13:05]</a>.

### Changing Times and CuLitho's Emergence
Over time, the industry caught up to [[inverse_lithography_technology_ilt | ILT]]'s requirements <a class="yt-timestamp" data-t="00:13:14">[00:13:14]</a>. Mask writing tools improved, with new multi-beam tools (e.g., from IMS) enabling the production of complex curvilinear masks in a reasonable time <a class="yt-timestamp" data-t="00:13:20">[00:13:20]</a>.

However, the computational challenges remained <a class="yt-timestamp" data-t="00:13:32">[00:13:32]</a>, especially with the increasing complexity of leading-edge chips; for example, the Hopper chip has 80 billion transistors, leading to trillions of polygons on a single chip <a class="yt-timestamp" data-t="00:13:40">[00:13:40]</a>. These demands forced fabs to use [[inverse_lithography_technology_ilt | ILT]] more, incentivizing them to find ways to make it faster <a class="yt-timestamp" data-t="00:13:57">[00:13:57]</a>.

TSMC presented intriguing simulation results suggesting that GPUs could speed up [[inverse_lithography_technology_ilt | ILT]] <a class="yt-timestamp" data-t="00:14:07">[00:14:07]</a>. [[Nvidia and competition in the AI chip market | Nvidia]] took on the challenge to turn these simulations into reality, resulting in CuLitho <a class="yt-timestamp" data-t="00:14:17">[00:14:17]</a>.

## Conclusion
Techniques like [[computational_lithography_advancements | computational lithography]] have a direct impact on the ability to print ever smaller features <a class="yt-timestamp" data-t="00:14:28">[00:14:28]</a>. The field is vast, including functionalities such as Source Mask Optimization (SMO), which optimizes both the mask pattern and the illuminating light source for best results <a class="yt-timestamp" data-t="00:14:38">[00:14:38]</a>. The development of software libraries like CuLitho demonstrates a self-referential cycle where computers enable the creation of faster computers <a class="yt-timestamp" data-t="00:14:48">[00:14:48]</a>.