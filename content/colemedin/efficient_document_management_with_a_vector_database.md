---
title: Efficient document management with a vector database
videoId: 7dKQPbSXiB8
---

From: [[colemedin]] <br/> 

This article details how to build an AI agent that efficiently manages tasks by searching through meeting notes and summaries to create action items in Asana. The agent is built upon a Retrieval Augmented Generation (RAG) implementation, addressing previous limitations and enhancing overall functionality <a class="yt-timestamp" data-t="00:00:00">[00:00:00]</a>. This system is designed to save time and improve organization by automating the process of extracting and creating tasks from meeting notes <a class="yt-timestamp" data-t="00:00:17">[00:00:17]</a>.

## Addressing Previous RAG Implementation Flaws

The current AI agent is an extension of a prior [[reasoning_with_local_models_and_vector_databases | RAG implementation]] from a previous AI Agent Master Class video <a class="yt-timestamp" data-t="00:00:24">[00:00:24]</a>. The previous implementation had several key flaws that are resolved in this enhanced version <a class="yt-timestamp" data-t="00:00:38">[00:00:38]</a>:

1.  **Intelligent RAG Utilization**: The previous RAG system always performed a document search regardless of the user's prompt, assuming all queries were about documents <a class="yt-timestamp" data-t="00:00:43">[00:00:43]</a>. The improved AI agent intelligently determines whether it needs to search through documents or can answer the question immediately <a class="yt-timestamp" data-t="00:00:56">[00:00:56]</a>.
2.  **Tool Integration**: The former RAG implementation was standalone and did not interact with other tools or APIs <a class="yt-timestamp" data-t="00:01:07">[00:01:07]</a>. The new agent integrates with external services like Asana to perform additional actions, such as creating tasks <a class="yt-timestamp" data-t="00:01:13">[00:01:13]</a>.
3.  **Efficient Vector Database Loading**: Previously, the [[creating_and_utilizing_a_vector_database_for_rag | vector database]] and documents were loaded into memory every time the chatbot ran, which was highly inefficient <a class="yt-timestamp" data-t="00:01:22">[00:01:22]</a>. The updated agent now uses a locally stored [[choosing_vector_databases_for_rag_applications | vector database]], eliminating the need to reload documents with each script execution <a class="yt-timestamp" data-t="00:01:32">[00:01:32]</a>.

## Building the Local Vector Database

The first step in setting up the agent is [[setting_up_a_superbase_vector_store_for_rag | creating a local vector database]] and loading documents into it <a class="yt-timestamp" data-t="00:01:53">[00:01:53]</a>.

### Document Preparation and Loading
The documents used for the vector database are fake meeting notes (PDF and text files) generated by GPT and stored in a GitHub repository <a class="yt-timestamp" data-t="00:01:58">[00:01:58]</a>. The process involves:

*   **Package Import**: Importing necessary packages, primarily from LangChain, for embedding functions, Chroma (the chosen [[using_supabase_as_a_vector_database | vector database]]), document loading, and chunking <a class="yt-timestamp" data-t="00:02:51">[00:02:51]</a>.
*   **Environment Variables**: Loading environment variables to define the directory for document loading, which defaults to the `meeting_notes` folder <a class="yt-timestamp" data-t="00:03:05">[00:03:05]</a>.
*   **Document Loading Function**: A function `load_documents` uses LangChain's `DirectoryLoader` to load all documents from a specified folder <a class="yt-timestamp" data-t="00:03:22">[00:03:22]</a>. This loader supports various document types including PDF, text, HTML, Markdown, and Word documents, with LangChain offering more custom options for other file formats <a class="yt-timestamp" data-t="00:03:32">[00:03:32]</a>.
*   **Document Chunking**: Documents are split into chunks, typically around 1,000 characters per chunk, to optimize the return of relevant snippets to the large language model rather than entire documents <a class="yt-timestamp" data-t="00:04:00">[00:04:00]</a>.

### Instantiating Chroma DB
The main function initializes the [[managing_embeddings_and_vectors_in_a_knowledge_base | embedding function]] using an open-source Hugging Face embedding model <a class="yt-timestamp" data-t="00:04:30">[00:04:30]</a>. It then instantiates Chroma and saves it to a `chroma_DB` folder, which contains a SQL light file and other related data <a class="yt-timestamp" data-t="00:04:33">[00:04:33]</a>. Once this script is run, the [[open_source_ai_tools_for_database_management | AI agent]] can load this Chroma DB instance without needing to reload the documents, as they are already stored locally <a class="yt-timestamp" data-t="00:04:52">[00:04:52]</a>.

## Integrating RAG into the AI Agent

The AI agent is an existing Asana agent with tools for interacting with Asana (e.g., creating projects, updating tasks) <a class="yt-timestamp" data-t="00:05:14">[00:05:14]</a>. The agent uses a Streamlit UI for interaction <a class="yt-timestamp" data-t="00:05:37">[00:05:37]</a>. To enhance it with RAG capabilities, the following steps are taken:

*   **Package Imports**: Import necessary LangChain packages for [[using_supabase_as_a_vector_database_for_ai_agents | interacting with the vector database]] <a class="yt-timestamp" data-t="00:05:54">[00:05:54]</a>.
*   **Chroma Instance Function**: A function `get_chroma_instance` is created to load the existing vector database. It uses the same embedding model as during document loading and points to the saved `chroma_DB` folder <a class="yt-timestamp" data-t="00:06:00">[00:06:00]</a>.
*   **`query_documents` Tool**: A new tool called `query_documents` is defined. This tool allows the large language model (LLM) to perform a similarity search within the Chroma instance, returning the top three matching documents using cosine similarity <a class="yt-timestamp" data-t="00:07:01">[00:07:01]</a>. A docstring provides the LLM with instructions on how and when to use this tool <a class="yt-timestamp" data-t="00:06:56">[00:06:56]</a>.
*   **Tool Mapping**: The `query_documents` tool is added to the agent's tool mapping, making it available for the AI agent to use dynamically <a class="yt-timestamp" data-t="00:07:36">[00:07:36]</a>.

## Demonstration and Benefits

The integrated AI agent can now intelligently decide whether to use RAG to search documents or interact with Asana.

### Example Workflow
1.  **Querying Documents**: A user can ask a question about meeting notes, such as details about a "wellness program" <a class="yt-timestamp" data-t="00:08:00">[00:08:00]</a>. The agent uses its `query_documents` tool to find the relevant information, for instance, that Emily proposed yoga sessions and mental health resources as part of the program <a class="yt-timestamp" data-t="00:08:14">[00:08:14]</a>.
2.  **Creating Asana Tasks**: Building on the retrieved information, the user can then instruct the agent to create a new project in Asana called "wellness program" and make the discovered items (yoga sessions, mental health resources) as tasks within that project <a class="yt-timestamp" data-t="00:08:31">[00:08:31]</a>. The agent can process this complex request, pulling information from the documents and using the Asana API to create the project and tasks <a class="yt-timestamp" data-t="00:08:51">[00:08:51]</a>.

### Advantages
*   **Time-Saving**: Automating the process of extracting action items from notes and creating tasks saves significant time compared to manual searching and data entry <a class="yt-timestamp" data-t="00:09:42">[00:09:42]</a>.
*   **Improved Organization**: The agent reduces the friction associated with managing meeting follow-ups, leading to better organization and ensuring that tasks are not neglected <a class="yt-timestamp" data-t="00:10:01">[00:10:01]</a>. It handles the "grunt work" of task management, allowing users to stay efficient <a class="yt-timestamp" data-t="00:10:13">[00:10:13]</a>.
*   **Seamless Integration**: The ability to combine document retrieval with external API interactions (like Asana) in a single intelligent agent makes for a powerful and intuitive user experience <a class="yt-timestamp" data-t="00:08:27">[00:08:27]</a>.

## Future Extensions

Future developments will involve extending this agent into the cloud, allowing documents to be stored in services like Google Drive and the vector database to operate without being strictly local, paving the way for a production-ready application <a class="yt-timestamp" data-t="00:10:38">[00:10:38]</a>. This next step will explore [[integrating_knowledge_graphs_with_vector_databases_for_ai_solutions | integrating knowledge graphs with vector databases for AI solutions]].