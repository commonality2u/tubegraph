---
title: retrieval augmented generation RAG
videoId: 2CXn-CByNoo
---

From: [[aidotengineer]] <br/> 

Retrieval Augmented Generation (RAG) is a technique for enhancing the capabilities of language models by enabling them to access and integrate information from external knowledge bases <a class="yt-timestamp" data-t="00:04:06">[00:04:06]</a>. This approach aims to provide more accurate and contextually relevant responses <a class="yt-timestamp" data-t="00:04:48">[00:04:48]</a>.

Jonathan Fernandez, an independent AI engineer, has experience working with language models prior to ChatGPT's emergence, helping companies build and ship production-ready [[generative_ai_project_challenges_and_strategies | generative AI solutions]] <a class="yt-timestamp" data-t="00:00:04">[00:00:04]</a>. His insights into RAG solutions are based on lessons learned from "37 fails" <a class="yt-timestamp" data-t="00:00:35">[00:00:35]</a>.

## How RAG Works <a class="yt-timestamp" data-t="00:04:06">[00:04:06]</a>

A typical RAG process involves three main steps:

1.  **Retrieval**: When a user submits a query (e.g., "Where can I get help in London?"), the system performs a semantic search through a vector database to [[components_of_rag_stack | retrieve]] relevant documents <a class="yt-timestamp" data-t="00:04:13">[00:04:13]</a>.
2.  **Augmentation**: The original user query is combined with the retrieved information from the vector database <a class="yt-timestamp" data-t="00:04:31">[00:04:31]</a>. This combined input is then provided as context to the large language model (LLM) <a class="yt-timestamp" data-t="00:04:40">[00:04:40]</a>.
3.  **Generation**: With the provided context and the original query, the LLM generates a coherent and informed response <a class="yt-timestamp" data-t="00:04:43">[00:04:43]</a>.

### Naive RAG Solution <a class="yt-timestamp" data-t="00:04:56">[00:04:56]</a>

A basic RAG implementation follows this flow:
*   The query is embedded <a class="yt-timestamp" data-t="00:05:02">[00:05:02]</a>.
*   This embedded query is compared to documents in the vector database <a class="yt-timestamp" data-t="00:05:04">[00:05:04]</a>.
*   Relevant documents are retrieved <a class="yt-timestamp" data-t="00:05:10">[00:05:10]</a>.
*   The retrieved documents and the query are passed to the language model as context <a class="yt-timestamp" data-t="00:05:13">[00:05:13]</a>.
*   The language model generates a response <a class="yt-timestamp" data-t="00:05:18">[00:05:18]</a>.

In a prototype using Llama Index, a basic RAG solution can be set up with just a few lines of code to retrieve HTML files, store them in an in-memory vector database, and then query it <a class="yt-timestamp" data-t="00:07:57">[00:07:57]</a>. However, a naive solution may not yield satisfactory results <a class="yt-timestamp" data-t="00:08:27">[00:08:27]</a>.

## Improving RAG Solutions <a class="yt-timestamp" data-t="00:08:42">[0:08:42]</a>

To achieve a more sophisticated RAG solution, additional [[evaluation_and_improvement_of_rag_solutions | components]] are often added:

1.  **Query Processing**: This step involves preparing the user query, for example, by removing personally identifiable information (PII) before passing it to the RAG system <a class="yt-timestamp" data-t="00:08:47">[00:08:47]</a>.
2.  **Post-Retrieval Processing**: This step aims to improve the accuracy of the documents retrieved from the vector database, typically through a re-ranking mechanism <a class="yt-timestamp" data-t="00:09:06">[00:09:06]</a>.

### Cross-Encoders vs. Bi-Encoders <a class="yt-timestamp" data-t="00:09:21">[00:09:21]</a>

Understanding how encoders work is crucial for improving retrieval accuracy:

*   **Cross-Encoder**: A cross-encoder takes both a query and a document, passes them to a BERT model (the encoder from the original transformer model), and then to a classifier <a class="yt_timestamp" data-t="00:09:28">[00:09:28]</a>. It outputs a score between 0 and 1, indicating semantic similarity <a class="yt-timestamp" data-t="00:09:45">[00:09:45]</a>.
    *   **Pros**: Excellent for additional accuracy <a class="yt-timestamp" data-t="00:10:04">[00:10:04]</a>.
    *   **Cons**: Slow and not scalable, especially with large documents, because it processes the query and document together <a class="yt-timestamp" data-t="00:09:53">[00:09:53]</a>. Best used post-retrieval for re-ranking a small set of documents <a class="yt-timestamp" data-t="00:11:30">[00:11:30]</a>.
*   **Bi-Encoder**: A bi-encoder uses two separate encoder modelsâ€”one for the query and one for the document <a class="yt-timestamp" data-t="00:10:25">[00:10:25]</a>. Each encoder processes its input independently to produce an embedding, and then their similarity is compared using metrics like cosine similarity <a class="yt-timestamp" data-t="00:10:42">[00:10:42]</a>.
    *   **Pros**: Fast and scalable, as embeddings can be pre-computed <a class="yt-timestamp" data-t="00:10:54">[00:10:54]</a>. Excellent for information retrieval <a class="yt-timestamp" data-t="00:10:58">[00:10:58]</a>.
    *   **Cons**: Less accurate than cross-encoders for fine-grained similarity.
    *   **Application**: Ideal for the vector database's retrieval step, where many documents need to be compared against a query <a class="yt-timestamp" data-t="00:11:16">[00:11:16]</a>.

## RAG Stack Components and Choices <a class="yt-timestamp" data-t="00:00:40">[00:00:40]</a>

The [[components_of_rag_stack | components of a RAG stack]] often vary between prototyping and production environments <a class="yt-timestamp" data-t="00:00:51">[00:00:51]</a>. Prototyping is typically done in Google Colab for its free hardware accelerators <a class="yt-timestamp" data-t="00:00:53">[00:00:53]</a>, while production environments, especially for financial institutions, often require on-premise solutions like Docker <a class="yt-timestamp" data-t="00:01:04">[00:01:04]</a>.

| Component                  | Prototyping Choice                         | Production Choice                                           | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             [[components_of_rag_stack | RAG]] Stack we landed on after 37 fails. Hi, I'm Jonathan Fernandez and I've been working with language models way before chat GBT appeared on the scene. So I work as an independent AI engineer and I help companies build and ship production ready [[generative_ai_project_challenges_and_strategies | generative AI solutions]]. Now if you are new to rag I'll give you a bit of an introduction but this is my objective is for this to be the most ROI rag guide per minute on the internet.

### Orchestration <a class="yt-timestamp" data-t="00:01:23">[00:01:23]</a>

*   **Prototyping**: Llama Index or LangGraph <a class="yt-timestamp" data-t="00:01:25">[00:01:25]</a>.
*   **Production**: Llama Index <a class="yt-timestamp" data-t="00:01:29">[00:01:29]</a>.

### Embedding Models <a class="yt-timestamp" data-t="00:01:31">[00:01:31]</a>

*   **Prototyping**: Closed models (via API) or open models like Nvidia or BAI <a class="yt-timestamp" data-t="00:01:34">[00:01:34]</a>. The default in Llama Index is `text-embedding-ada-002` from OpenAI, but can be swapped for `text-embedding-3-large` or open models like BGE small from BAI <a class="yt-timestamp" data-t="00:12:13">[00:12:13]</a>.
*   **Production**: Open models (e.g., BAI or Nvidia) <a class="yt-timestamp" data-t="00:01:46">[00:01:46]</a> <a class="yt-timestamp" data-t="00:16:56">[00:16:56]</a>.

### Vector Database <a class="yt-timestamp" data-t="00:01:51">[00:01:51]</a>

*   **Choice**: Qdrant <a class="yt-timestamp" data-t="00:01:52">[00:01:52]</a>.
*   **Reason**: Scales exceptionally well from a few documents to hundreds of thousands <a class="yt-timestamp" data-t="00:01:53">[00:01:53]</a> <a class="yt-timestamp" data-t="00:17:01">[00:17:01]</a>.

### Large Language Model (LLM) <a class="yt-timestamp" data-t="00:02:04">[00:02:04]</a>

*   **Prototyping**: Closed models (e.g., OpenAI's GPT-3.5 Turbo or GPT-4) for simplicity of APIs <a class="yt-timestamp" data-t="00:02:07">[00:02:07]</a> <a class="yt-timestamp" data-t="00:13:22">[00:13:22]</a>. Open models like Meta's Llama 3 or Qwen 3 are also options <a class="yt-timestamp" data-t="00:02:12">[00:02:12]</a>.
*   **Production**: Open models (e.g., Llama 3.2 or Qwen 3.4 billion from Alibaba Cloud) served via Olama or Hugging Face Text Generation Inference <a class="yt-timestamp" data-t="00:02:21">[00:02:21]</a>.

### Monitoring and Tracing <a class="yt-timestamp" data-t="00:02:41">[00:02:41]</a>

Essential for troubleshooting and identifying time-consuming components <a class="yt-timestamp" data-t="00:02:44">[00:02:44]</a>.
*   **Prototyping**: LangSmith or Llama Phoenix <a class="yt-timestamp" data-t="00:02:56">[00:02:56]</a>.
*   **Production**: Arise Phoenix (Docker container) <a class="yt-timestamp" data-t="00:03:00">[00:03:00]</a> <a class="yt-timestamp" data-t="00:17:18">[00:17:18]</a>.

### Re-ranking (Post-Retrieval Improvement) <a class="yt-timestamp" data-t="00:03:07">[00:03:07]</a>

Improves the accuracy of the RAG solution <a class="yt-timestamp" data-t="00:03:08">[00:03:08]</a>. This component typically uses a cross-encoder <a class="yt-timestamp" data-t="00:11:41">[00:11:41]</a>.
*   **Prototyping**: Closed model like Cohere's re-ranker <a class="yt-timestamp" data-t="00:03:11">[00:03:11]</a> <a class="yt-timestamp" data-t="00:17:24">[00:17:24]</a>.
*   **Production**: Open solution from Nvidia <a class="yt-timestamp" data-t="00:03:19">[00:03:19]</a> <a class="yt-timestamp" data-t="00:17:26">[00:17:26]</a>.

### Evaluation <a class="yt-timestamp" data-t="00:03:24">[00:03:24]</a>

Crucial for assessing the quality of your RAG solution <a class="yt-timestamp" data-t="00:03:26">[00:03:26]</a>.
*   **Framework**: [[tools_and_interfaces_for_rag_evaluation | Ragas]] <a class="yt-timestamp" data-t="00:03:29">[00:03:29]</a>.
*   **Features**: Allows testing across many documents and checking the quality using the LLM itself, making the task painless <a class="yt-timestamp" data-t="00:16:48">[00:16:48]</a>.

## Knowledge Base Example <a class="yt-timestamp" data-t="00:03:35">[00:03:35]</a>

A single knowledge base was used for demonstration, consisting of HTML files for a train/railway company operating in London <a class="yt-timestamp" data-t="00:03:52">[00:03:52]</a>. An example query is "Where can I get help in London?" <a class="yt-timestamp" data-t="00:03:48">[00:03:48]</a>. The knowledge base includes articles like "Are there any wheelchair friendly taxis in London?" and "Are there any wheelchair friendly taxis in Paris?" <a class="yt-timestamp" data-t="00:05:42">[00:05:42]</a>.

## Prototyping in Google Colab <a class="yt-timestamp" data-t="00:05:22">[00:05:22]</a>

The process of building and refining the RAG solution was demonstrated in Google Colab <a class="yt-timestamp" data-t="00:05:25">[00:05:25]</a>.
*   Files are copied to a data folder in Colab <a class="yt-timestamp" data-t="00:06:19">[00:06:19]</a>.
*   Llama Index's `SimpleDirectoryReader` is used to read HTML files, which are treated as documents with IDs and metadata (e.g., file path) <a class="yt-timestamp" data-t="00:06:44">[00:06:44]</a>.
*   Initially, a naive RAG solution using an in-memory vector database and OpenAI's `gpt-3.5-turbo` yields an unhelpful response <a class="yt-timestamp" data-t="00:08:00">[00:08:00]</a>.
*   By swapping the in-memory vector database for an in-memory Qdrant solution and changing the embedding model to BAI's BGE small (an open solution downloaded locally), the response improves slightly but is still not ideal <a class="yt-timestamp" data-t="00:11:53">[00:11:53]</a>. The LLM is also changed to GPT-4 <a class="yt-timestamp" data-t="00:13:35">[00:13:35]</a>.
*   The system's `source_nodes` feature in Llama Index allows inspecting which files were used to generate the response, helping in troubleshooting <a class="yt-timestamp" data-t="00:14:42">[00:14:42]</a>.
*   Finally, adding a re-ranker (cross-encoder) using Cohere's closed model to re-rank the top two results from the vector database significantly improves the answer to a more accurate and specific one <a class="yt-timestamp" data-t="00:15:14">[00:15:14]</a>.

## Production Environment with Docker <a class="yt-timestamp" data-t="00:01:04">[00:01:04]</a>

For production, Docker is often used for on-premise or cloud deployments <a class="yt-timestamp" data-t="00:01:14">[00:01:14]</a>. A `docker-compose.yaml` file defines the services:
*   An image for data ingestion connected to the knowledge base <a class="yt-timestamp" data-t="00:17:57">[00:17:57]</a>.
*   A Qdrant image for the vector database <a class="yt-timestamp" data-t="00:18:03">[00:18:03]</a>.
*   A front-end application <a class="yt-timestamp" data-t="00:18:09">[00:18:09]</a>.
*   Olama or Hugging Face's Text Generation Inference engine for serving LLMs <a class="yt-timestamp" data-t="00:18:12">[00:18:12]</a>.
*   Phoenix for tracing <a class="yt-timestamp" data-t="00:18:19">[00:18:19]</a>.
*   [[tools_and_interfaces_for_rag_evaluation | Ragas]] for model [[metrics_for_rag_evaluation | evaluation]] <a class="yt-timestamp" data-t="00:18:22">[00:18:22]</a>.

Each service runs as a container within Docker Compose, with configurations for embeddings, re-ranking, and LLMs <a class="yt-timestamp" data-t="00:18:26">[00:18:26]</a>.